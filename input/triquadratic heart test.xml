<?xml version="1.0" encoding="UTF-8"?>
<fieldml version="0.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="Fieldml.xsd">
 <Region name="heart" library="library_0.3.xml">

  <EnsembleType name="heart.nodes.type">
   <members>
    <member_range min="1" max="633" />
   </members>
  </EnsembleType>

  <AbstractEvaluator name="heart.nodes.variable" valueType="heart.nodes.type" />

  <MeshType name="heart.mesh.type" xi_component="library.ensemble.xi.3d">
   <elements>
    <member_range min="1" max="60"/>
   </elements>
   <shapes default="library.shape.cube" />
  </MeshType>
  
  <AbstractEvaluator name="heart.mesh.variable" valueType="heart.mesh.type" />


  <ParametersEvaluator name="heart.cube.3x3x3_nodes" valueType="heart.nodes.type">
   <variables>
     <variable name="library.localNodes.3d.cube3x3x3.variable" />
     <variable name="heart.mesh.variable" />
   </variables>
   <SemidenseData>
    <denseIndexes>
     <index evaluator="library.localNodes.3d.cube3x3x3.variable" />
     <index evaluator="heart.mesh.variable.element" />
    </denseIndexes>
    <dataLocation>
     <fileData file="heart.connectivity" type="lines" offset="0" />
    </dataLocation>
   </SemidenseData>
  </ParametersEvaluator>


  <AbstractEvaluator name="heart.nodal_dofs" valueType="library.real.1d">
   <variables>
     <variable name="heart.nodes.variable" />
   </variables>
  </AbstractEvaluator>
  

  <AggregateEvaluator name="heart.element_params.triquadraticLagrange" valueType="library.parameters.3d.triquadraticLagrange">
   <variables>
     <variable name="heart.mesh.variable" />
     <variable name="heart.nodal_dofs" />
   </variables>
   <binds>
     <bind_index variable="library.localNodes.3d.cube3x3x3.variable" index_number="1"/>
     <bind variable="heart.nodes.variable" source="heart.cube.3x3x3_nodes"/>
   </binds>
   <componentEvaluators default="heart.nodal_dofs" />
  </AggregateEvaluator>

  
  <ReferenceEvaluator name="heart.triquadraticLagrange" evaluator="library.interpolator.3d.unit.triquadraticLagrange"
      valueType="library.real.1d">
   <variables>
     <variable name="heart.mesh.variable" />
     <variable name="heart.nodal_dofs" />
   </variables>
   <binds>
    <bind variable="library.parameters.3d.triquadraticLagrange.variable" source="heart.element_params.triquadraticLagrange" />
    <bind variable="library.xi.3d.variable" source="heart.mesh.variable.xi" />
   </binds>
  </ReferenceEvaluator>


  <PiecewiseEvaluator name="heart.template.triquadratic" valueType="library.real.1d">
   <variables>
     <variable name="heart.mesh.variable" />
     <variable name="heart.nodal_dofs" />
   </variables>
   <binds>
     <bind_index variable="heart.mesh.variable.element" index_number="1" />
   </binds>
   <elementEvaluators default="heart.triquadraticLagrange" />
  </PiecewiseEvaluator>


  <AbstractEvaluator name="heart.rc3.component" valueType="library.ensemble.rc.3d" />

  <ParametersEvaluator name="heart.node.coordinates" valueType="library.real.1d">
   <variables>
     <variable name="heart.rc3.component" />
     <variable name="heart.nodes.variable" />
   </variables>
   <SemidenseData>
    <denseIndexes>
     <index evaluator="heart.rc3.component" />
     <index evaluator="heart.nodes.variable" />
    </denseIndexes>
    <dataLocation>
     <fileData file="heart.node.coordinates" type="lines" offset="0" />
    </dataLocation>
   </SemidenseData>
  </ParametersEvaluator>


  <AbstractEvaluator name="heart.nodal_component_dofs" valueType="library.real.1d">
   <variables>
     <variable name="heart.rc3.component" />
     <variable name="heart.nodes.variable" />
   </variables>
  </AbstractEvaluator>


  <AggregateEvaluator name="heart.coordinates.template" valueType="library.coordinates.rc.3d">
   <variables>
     <variable name="heart.mesh.variable" />
     <variable name="heart.nodal_component_dofs" />
   </variables>
   <binds>
     <bind_index variable="heart.rc3.component" index_number="1"/>
     <bind variable="heart.nodal_dofs" source="heart.nodal_component_dofs"/>
   </binds>
   <componentEvaluators>
    <component number="1" evaluator="heart.template.triquadratic" />
    <component number="2" evaluator="heart.template.triquadratic" />
    <component number="3" evaluator="heart.template.triquadratic" />
   </componentEvaluators>
  </AggregateEvaluator>
  
  <ReferenceEvaluator name="heart.coordinates" evaluator="heart.coordinates.template">
   <variables>
     <variable name="heart.mesh.variable" />
   </variables>
   <binds>
    <bind variable="heart.nodal_component_dofs" source="heart.node.coordinates" />
   </binds>
  </ReferenceEvaluator>
 
<ElementSet name="test.set" valueType="heart.mesh.type.elements">
<elements>21-40 11 13 15 17 4-9</elements>
</ElementSet>
  </Region>
</fieldml>
